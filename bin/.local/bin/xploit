#!/usr/bin/env bash

FILENAME="xploit.py"

if [[ "$#" -ne 3 ]]; then
    echo "Usage: $0 <local_bin> <remote_addr> <remote_port>"
    exit 1
fi

install -b -m 755 /dev/null $FILENAME

cat > $FILENAME << EOF
#!/usr/bin/env python3

import sys
from pwn import *


def main(args):
    if len(args) == 2 and args[1] == "remote":
        io = remote("$2", $3)
    else:
        io = process("./$1")

#### xploit ####################################################################
    #






    io.interactive()
################################################################################


if __name__ == "__main__":
    main(sys.argv)
EOF

$EDITOR $FILENAME
